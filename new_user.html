<!DOCTYPE html>
<html lang="es">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>SIT - Usuarios</title>
    <!-- logo de pa pesta;a de la pagina -->
  <link rel="icon" type="image/png" href="assets/icons/logoicon.png"/>

  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;600;700&display=swap" rel="stylesheet">
  <link rel="stylesheet" href="css/usuarios.css">
</head>

<body>
  <!-- Sidebar -->
  <aside class="sidebar">
    <div class="brand">
      <div class="logo">SIT</div>
      <div>
        <div class="title">SIT - Admin</div>
        <div class="subtitle">Gestión de usuarios</div>
      </div>
    </div>

    <div class="menu">
      <button onclick="window.location.href='dashboard.html'">📊 Dashboard</button>
      <button class="active">👥 Usuarios</button>
      <button onclick="window.location.href='tickets.html'">🎫 Tickets</button>
      <button onclick="window.location.href='chat.html'">💬 Chat</button>
      <button onclick="window.location.href='reportes.html'">📑 Reportes</button>
      <button onclick="window.location.href='departamentos.html'">🏢 Departamentos</button>
      <button onclick="window.location.href='bitacora.html'">📂 Bitácora</button>
    </div>

    <button class="btn-logout" id="btnLogout">Cerrar sesión</button>
    <div class="sidebar-footer">
      Usuario: <span id="userName">Cargando...</span><br>
      Sesión activa
    </div>
  </aside>

  <!-- Main -->
  <main class="main">
    <div class="main-header">
      <h1>Gestión de Usuarios</h1>
    </div>

    <!-- Formulario crear usuario -->
    <div class="card">
      <h2>Crear nuevo usuario</h2>
      <form id="formUsuario" class="form-container">
        <div class="form-group">
          <label for="uNombre">Nombre</label>
          <input type="text" id="uNombre" required>
        </div>

        <div class="form-group">
          <label for="uDNI">DNI</label>
          <input type="text" id="uDNI" maxlength="13" required>
        </div>

        <div class="form-group">
          <label for="uCorreo">Correo</label>
          <input type="email" id="uCorreo" required>
        </div>

        <div class="form-group">
          <label for="uPassword">Contraseña</label>
          <input type="password" id="uPassword" required>
        </div>

        <div class="form-group">
          <label for="uDepartamento">Departamento</label>
          <select id="uDepartamento" required></select>
        </div>

        <div class="form-group">
          <label for="uRol">Rol</label>
          <select id="uRol" required>
            <option value="Usuario">Usuario</option>
            <option value="Técnico">Tecnico</option>
            <option value="Administrador">Administrador</option>
          </select>
        </div>

        <div class="form-actions">
          <button type="submit" class="btn">Crear Usuario</button>
        </div>
      </form>

      <p class="msg error" id="msgError"></p>
      <p class="msg ok" id="msgOk"></p>
    </div>

    <!-- Tabla usuarios -->
    <div class="card">
      <h2>Usuarios registrados</h2>

      <!-- 🔎 Barra de búsqueda + filtro rol -->
      <div class="search-filters">
        <input type="text" id="buscarUsuario" placeholder="Buscar por nombre, DNI, correo o departamento...">
        <select id="filtroRol">
          <option value="">Todos los roles</option>
          <option value="Usuario">Usuario</option>
          <option value="Tecnico">Tecnico</option>
          <option value="Administrador">Administrador</option>
        </select>
      </div>

      <div class="table-responsive">
        <table class="users-table" id="tablaUsuarios">
          <thead>
            <tr>
              <th>Nombre</th>
              <th>DNI</th>
              <th>Correo</th>
              <th>Departamento</th>
              <th>Rol</th>
              <th>Acciones</th>
            </tr>
          </thead>
          <tbody>
            <tr>
              <td>Juan Pérez</td>
              <td>0801199901234</td>
              <td>juan@example.com</td>
              <td>Sistemas</td>
              <td><span class="badge admin">Administrador</span></td>
              <td class="acciones">
                <button class="btn-action edit">✏️ Editar</button>
                <button class="btn-action delete">🗑️ Eliminar</button>
              </td>
            </tr>
            <tr>
              <td>Ana Gómez</td>
              <td>0801200104567</td>
              <td>ana@example.com</td>
              <td>Soporte</td>
              <td><span class="badge tecnico">Técnico</span></td>
              <td class="acciones">
                <button class="btn-action edit">✏️ Editar</button>
                <button class="btn-action delete">🗑️ Eliminar</button>
              </td>
            </tr>
            <tr>
              <td>Pedro López</td>
              <td>0801200207890</td>
              <td>pedro@example.com</td>
              <td>Administración</td>
              <td><span class="badge usuario">Usuario</span></td>
              <td class="acciones">
                <button class="btn-action edit">✏️ Editar</button>
                <button class="btn-action delete">🗑️ Eliminar</button>
              </td>
            </tr>
          </tbody>
        </table>
      </div>
    </div>
  </main>

  <!-- Modal editar -->
  <div id="modalEditar" class="modal">
    <div class="modal-content">
      <h2>Editar Usuario</h2>

      <div class="form-group">
        <label for="eNombre">Nombre</label>
        <input type="text" id="eNombre">
      </div>

      <div class="form-group">
        <label for="eDNI">DNI</label>
        <input type="text" id="eDNI" maxlength="13">
      </div>

      <div class="form-group">
        <label for="eDepartamento">Departamento</label>
        <select id="eDepartamento"></select>
      </div>

      <div class="form-group">
        <label for="eRol">Rol</label>
        <select id="eRol">
          <option value="Usuario">Usuario</option>
          <option value="Tecnico">Tecnico</option>
          <option value="Administrador">Administrador</option>
        </select>
      </div>

      <div class="modal-actions">
        <button id="btnGuardarEdicion" class="btn">💾 Guardar cambios</button>
        <button class="btn-secondary" onclick="document.getElementById('modalEditar').style.display='none'">❌
          Cancelar</button>
      </div>
    </div>
  </div>

  <script type="module" src="js/users.js"></script>
</body>

</html>